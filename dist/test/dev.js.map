{"version":3,"sources":["../../test/dev.js"],"names":["Dummy","require","DTypes","propTypes","init","TEACHER_TYPE","createType","setPropMap","name","primitive","CLASS_TYPE","teacher","reference","type","grade","date","createBasicIndex","BASE_TYPE","num","x","createObject","undefined","chemistry9","Date","chemistry10","searchIndexRange","then","Promise","all","classes","map","c","get","console","dir","p","results","length"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,mBAAR,CAAd;AACA,IAAMC,SAASF,MAAMG,SAArB;;AAEAH,MAAMI,IAAN,CAAW,uBAAX;;AAGA,IAAMC,eAAeL,MAAMM,UAAN,CAAiB,SAAjB,EAA4B,UAA5B,CAArB;AACAD,aAAaE,UAAb,CAAwB;AACpBC,UAAMN,OAAOO,SAAP;AADc,CAAxB;;AAIA,IAAMC,aAAaV,MAAMM,UAAN,CAAiB,OAAjB,EAA0B,QAA1B,EAAoC;AACnDE,UAAMN,OAAOO,SAAP,EAD6C;AAEnDE,aAAST,OAAOU,SAAP,CAAiB,EAACC,MAAMR,YAAP,EAAjB,CAF0C;AAGnDS,WAAOZ,OAAOO,SAAP,EAH4C;AAInDM,UAAMb,OAAOO,SAAP;AAJ6C,CAApC,CAAnB;AAMAC,WAAWM,gBAAX,CAA4B,MAA5B;;AAEA,IAAMC,YAAYjB,MAAMM,UAAN,CAAiB,MAAjB,EAAyB,OAAzB,EAAkC;AAChDY,SAAKhB,OAAOO,SAAP;AAD2C,CAAlC,CAAlB;AAGAQ,UAAUD,gBAAV,CAA2B,KAA3B;;AAEA;AACA,KAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAI,GAApB,EAAyBA,GAAzB,EAA8B;AAC1BF,cAAUG,YAAV,CAAuBD,CAAvB,EAA0BE,SAA1B,EAAqC,EAACH,KAAKC,CAAN,EAArC;AACH;;AAED,IAAMR,UAAUN,aAAae,YAAb,CAA0B,CAA1B,EAA6BC,SAA7B,EAAwC,EAACb,MAAM,kBAAP,EAAxC,CAAhB;AACA,IAAMc,aAAaZ,WAAWU,YAAX,CAAwB,CAAxB,EAA2BC,SAA3B,EAAsC;AACrDb,UAAM,aAD+C;AAErDG,aAAS,CAF4C;AAGrDG,WAAO,CAH8C;AAIrDC,UAAM,IAAIQ,IAAJ,CAAS,YAAT;AAJ+C,CAAtC,CAAnB;AAMA,IAAMC,cAAcd,WAAWU,YAAX,CAAwB,CAAxB,EAA2BC,SAA3B,EAAsC;AACtDb,UAAM,cADgD;AAEtDG,aAAS,CAF6C;AAGtDG,WAAO,EAH+C;AAItDC,UAAM,IAAIQ,IAAJ,CAAS,YAAT;AAJgD,CAAtC,CAApB;;AAOA;;;;;AAKAb,WAAWe,gBAAX,CAA4B,MAA5B,EAAoC,IAAIF,IAAJ,CAAS,MAAT,CAApC,EAAsD,IAAIA,IAAJ,CAAS,MAAT,CAAtD,EACKG,IADL,CACU,mBAAW;AACbC,YAAQC,GAAR,CAAYC,QAAQC,GAAR,CAAY;AAAA,eAAKC,EAAEC,GAAF,CAAM,SAAN,CAAL;AAAA,KAAZ,CAAZ,EACKN,IADL,CACU,aAAK;AACPO,gBAAQC,GAAR,CAAYC,CAAZ;AACH,KAHL;AAIH,CANL;;AAQA;AACAlB,UAAUQ,gBAAV,CAA2B,KAA3B,EAAkC,CAAlC,EAAqC,OAArC,EACKC,IADL,CACU;AAAA,WAAWO,QAAQC,GAAR,CAAYE,QAAQC,MAApB,CAAX;AAAA,CADV","file":"dev.js","sourcesContent":["const Dummy = require(\"../dist/src/index\");\r\nconst DTypes = Dummy.propTypes;\r\n\r\nDummy.init('http://localhost:3000');\r\n\r\n\r\nconst TEACHER_TYPE = Dummy.createType('teacher', '/teacher');\r\nTEACHER_TYPE.setPropMap({\r\n    name: DTypes.primitive(),\r\n})\r\n\r\nconst CLASS_TYPE = Dummy.createType('class', '/class', {\r\n    name: DTypes.primitive(),\r\n    teacher: DTypes.reference({type: TEACHER_TYPE}),\r\n    grade: DTypes.primitive(),\r\n    date: DTypes.primitive()\r\n});\r\nCLASS_TYPE.createBasicIndex('date');\r\n\r\nconst BASE_TYPE = Dummy.createType('base', '/base', {\r\n    num: DTypes.primitive()\r\n});\r\nBASE_TYPE.createBasicIndex('num');\r\n\r\n//Create many items to test scalability of search.\r\nfor (let x = 1; x < 100; x++) {\r\n    BASE_TYPE.createObject(x, undefined, {num: x});\r\n}\r\n\r\nconst teacher = TEACHER_TYPE.createObject(1, undefined, {name: \"Cameron Davidson\"});\r\nconst chemistry9 = CLASS_TYPE.createObject(1, undefined, {\r\n    name: \"Chemistry 9\",\r\n    teacher: 1,\r\n    grade: 9,\r\n    date: new Date('Jan 1 2018')\r\n});\r\nconst chemistry10 = CLASS_TYPE.createObject(2, undefined, {\r\n    name: \"Chemistry 10\",\r\n    teacher: 1,\r\n    grade: 10,\r\n    date: new Date('dec 1 2019')\r\n});\r\n\r\n/**\r\n * Searches the classes for ones between 2018 and 2020.\r\n * Gets the teacher for each one, which as a reference, returns a promise.\r\n * Groups this array of promises together, and when all are loaded prints the results.\r\n */\r\nCLASS_TYPE.searchIndexRange('date', new Date('2018'), new Date('2020'))\r\n    .then(classes => {\r\n        Promise.all(classes.map(c => c.get('teacher')))\r\n            .then(p => {\r\n                console.dir(p);\r\n            })\r\n    });\r\n\r\n//Demonstrates that this approach is scalable with large data sets.\r\nBASE_TYPE.searchIndexRange('num', 0, 1000000)\r\n    .then(results => console.dir(results.length));\r\n"]}